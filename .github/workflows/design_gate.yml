name: "Design Gate"

on:
  push:
    paths:
      - ".github/workflows/design_gate.yml"
      - "design/**"
      - "docs/design/**"
  pull_request:
    paths:
      - ".github/workflows/design_gate.yml"
      - "design/**"
      - "docs/design/**"
  workflow_dispatch:

jobs:
  design-gate:
    name: "Design Gate: validate"
    runs-on: ubuntu-latest
    steps:
      - name: "Checkout"
        uses: actions/checkout@v4

      - name: "Sanity: workflow YAML parses"
        shell: bash
        run: |
          set -euo pipefail
          python - <<'PY'
          import yaml
          p=".github/workflows/design_gate.yml"
          yaml.safe_load(open(p, "r", encoding="utf-8"))
          print("OK: design_gate.yml parses")
          PY
